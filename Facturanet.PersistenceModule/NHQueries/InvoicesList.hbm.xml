<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">

  <query name="InvoicesList" read-only="true">
    <![CDATA[
    select 
      invoice,
      invoice.Enterprise.Code, 
      invoice.Customer.Code, 
      invoice.Customer.Name,
      sum(item.Quantity * item.Price)
    from 
      Invoice invoice
      join invoice.Items item
    group by 
      invoice
    ]]>
  </query>
</hibernate-mapping>
